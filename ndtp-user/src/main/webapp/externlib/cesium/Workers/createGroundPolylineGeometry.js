/**
 * Cesium - https://github.com/CesiumGS/cesium
 *
 * Copyright 2011-2020 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/master/LICENSE.md for full licensing details.
 */
define(["./defined-b9ff0e39","./Check-e6691f86","./freezeObject-2d5b18ce","./defaultValue-199f5aa8","./Math-92bd3539","./Cartesian2-12797039","./Transforms-1175e52c","./RuntimeError-d5522ee3","./WebGLConstants-1819379c","./ComponentDatatype-a270fa7e","./GeometryAttribute-9396e1af","./when-c208a7cf","./EncodedCartesian3-9ab2586f","./IntersectionTests-e0f27278","./Plane-9e603d64","./WebMercatorProjection-ecf80563","./arrayRemoveDuplicates-1efed288","./ArcType-c72d871a","./EllipsoidRhumbLine-078646a4","./EllipsoidGeodesic-220adcef"],function(B,e,a,d,He,je,Be,t,n,Ve,Ge,r,Ye,V,i,s,G,Y,F,E){"use strict";function o(e){e=d.defaultValue(e,d.defaultValue.EMPTY_OBJECT),this._ellipsoid=d.defaultValue(e.ellipsoid,je.Ellipsoid.WGS84),this._rectangle=d.defaultValue(e.rectangle,je.Rectangle.MAX_VALUE),this._projection=new Be.GeographicProjection(this._ellipsoid),this._numberOfLevelZeroTilesX=d.defaultValue(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=d.defaultValue(e.numberOfLevelZeroTilesY,1)}Object.defineProperties(o.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),o.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},o.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},o.prototype.rectangleToNativeRectangle=function(e,a){var t=He.CesiumMath.toDegrees(e.west),n=He.CesiumMath.toDegrees(e.south),r=He.CesiumMath.toDegrees(e.east),i=He.CesiumMath.toDegrees(e.north);return B.defined(a)?(a.west=t,a.south=n,a.east=r,a.north=i,a):new je.Rectangle(t,n,r,i)},o.prototype.tileXYToNativeRectangle=function(e,a,t,n){var r=this.tileXYToRectangle(e,a,t,n);return r.west=He.CesiumMath.toDegrees(r.west),r.south=He.CesiumMath.toDegrees(r.south),r.east=He.CesiumMath.toDegrees(r.east),r.north=He.CesiumMath.toDegrees(r.north),r},o.prototype.tileXYToRectangle=function(e,a,t,n){var r=this._rectangle,i=this.getNumberOfXTilesAtLevel(t),s=this.getNumberOfYTilesAtLevel(t),o=r.width/i,l=e*o+r.west,u=(e+1)*o+r.west,c=r.height/s,C=r.north-a*c,p=r.north-(a+1)*c;return B.defined(n)||(n=new je.Rectangle(l,p,u,C)),n.west=l,n.south=p,n.east=u,n.north=C,n},o.prototype.positionToTileXY=function(e,a,t){var n=this._rectangle;if(je.Rectangle.contains(n,e)){var r=this.getNumberOfXTilesAtLevel(a),i=this.getNumberOfYTilesAtLevel(a),s=n.width/r,o=n.height/i,l=e.longitude;n.east<n.west&&(l+=He.CesiumMath.TWO_PI);var u=(l-n.west)/s|0;r<=u&&(u=r-1);var c=(n.north-e.latitude)/o|0;return i<=c&&(c=i-1),B.defined(t)?(t.x=u,t.y=c,t):new je.Cartesian2(u,c)}};var u=new je.Cartesian3,c=new je.Cartesian3,C=new je.Cartographic,p=new je.Cartesian3,h=new je.Cartesian3,l=new Be.BoundingSphere,g=new o,f=[new je.Cartographic,new je.Cartographic,new je.Cartographic,new je.Cartographic],m=new je.Cartesian2,Fe={};function w(e){je.Cartographic.fromRadians(e.east,e.north,0,f[0]),je.Cartographic.fromRadians(e.west,e.north,0,f[1]),je.Cartographic.fromRadians(e.east,e.south,0,f[2]),je.Cartographic.fromRadians(e.west,e.south,0,f[3]);var a,t=0,n=0,r=0,i=0,s=Fe._terrainHeightsMaxLevel;for(a=0;a<=s;++a){for(var o=!1,l=0;l<4;++l){var u=f[l];if(g.positionToTileXY(u,a,m),0===l)r=m.x,i=m.y;else if(r!==m.x||i!==m.y){o=!0;break}}if(o)break;t=r,n=i}if(0!==a)return{x:t,y:n,level:s<a?s:a-1}}Fe.initialize=function(){var e=Fe._initPromise;return B.defined(e)?e:(e=Be.Resource.fetchJson(Be.buildModuleUrl("Assets/approximateTerrainHeights.json")).then(function(e){Fe._terrainHeights=e}),Fe._initPromise=e)},Fe.getMinimumMaximumHeights=function(e,a){a=d.defaultValue(a,je.Ellipsoid.WGS84);var t=w(e),n=Fe._defaultMinTerrainHeight,r=Fe._defaultMaxTerrainHeight;if(B.defined(t)){var i=t.level+"-"+t.x+"-"+t.y,s=Fe._terrainHeights[i];B.defined(s)&&(n=s[0],r=s[1]),a.cartographicToCartesian(je.Rectangle.northeast(e,C),u),a.cartographicToCartesian(je.Rectangle.southwest(e,C),c),je.Cartesian3.midpoint(c,u,p);var o=a.scaleToGeodeticSurface(p,h);if(B.defined(o)){var l=je.Cartesian3.distance(p,o);n=Math.min(n,-l)}else n=Fe._defaultMinTerrainHeight}return{minimumTerrainHeight:n=Math.max(Fe._defaultMinTerrainHeight,n),maximumTerrainHeight:r}},Fe.getBoundingSphere=function(e,a){a=d.defaultValue(a,je.Ellipsoid.WGS84);var t=w(e),n=Fe._defaultMaxTerrainHeight;if(B.defined(t)){var r=t.level+"-"+t.x+"-"+t.y,i=Fe._terrainHeights[r];B.defined(i)&&(n=i[1])}var s=Be.BoundingSphere.fromRectangle3D(e,a,0);return Be.BoundingSphere.fromRectangle3D(e,a,n,l),Be.BoundingSphere.union(s,l,s)},Fe._terrainHeightsMaxLevel=6,Fe._defaultMaxTerrainHeight=9e3,Fe._defaultMinTerrainHeight=-1e5,Fe._terrainHeights=void 0,Fe._initPromise=void 0,Object.defineProperties(Fe,{initialized:{get:function(){return B.defined(Fe._terrainHeights)}}});var q=[Be.GeographicProjection,s.WebMercatorProjection],v=q.length,qe=Math.cos(He.CesiumMath.toRadians(30)),y=Math.cos(He.CesiumMath.toRadians(150)),X=0,W=1e3;function M(e){var a=(e=d.defaultValue(e,d.defaultValue.EMPTY_OBJECT)).positions;this.width=d.defaultValue(e.width,1),this._positions=a,this.granularity=d.defaultValue(e.granularity,9999),this.loop=d.defaultValue(e.loop,!1),this.arcType=d.defaultValue(e.arcType,Y.ArcType.GEODESIC),this._ellipsoid=je.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(M.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+je.Ellipsoid.packedLength+1+1}}}),M.setProjectionAndEllipsoid=function(e,a){for(var t=0,n=0;n<v;n++)if(a instanceof q[n]){t=n;break}e._projectionIndex=t,e._ellipsoid=a.ellipsoid};var T=new je.Cartesian3,_=new je.Cartesian3,O=new je.Cartesian3;function U(e,a,t,n,r){var i=J(n,e,0,T),s=J(n,e,t,_),o=J(n,a,0,O),l=Xe(s,i,_),u=Xe(o,i,O);return je.Cartesian3.cross(u,l,r),je.Cartesian3.normalize(r,r)}var P=new je.Cartographic,b=new je.Cartesian3,k=new je.Cartesian3,A=new je.Cartesian3;function Z(e,a,t,n,r,i,s,o,l,u,c){if(0!==r){var C;i===Y.ArcType.GEODESIC?C=new E.EllipsoidGeodesic(e,a,s):i===Y.ArcType.RHUMB&&(C=new F.EllipsoidRhumbLine(e,a,s));var p=C.surfaceDistance;if(!(p<r))for(var d=U(e,a,n,s,A),h=Math.ceil(p/r),g=p/h,f=g,m=h-1,w=o.length,v=0;v<m;v++){var y=C.interpolateUsingSurfaceDistance(f,P),M=J(s,y,t,b),T=J(s,y,n,k);je.Cartesian3.pack(d,o,w),je.Cartesian3.pack(M,l,w),je.Cartesian3.pack(T,u,w),c.push(y.latitude),c.push(y.longitude),w+=3,f+=g}}}var L=new je.Cartographic;function J(e,a,t,n){return je.Cartographic.clone(a,L),L.height=t,je.Cartographic.toCartesian(L,e,n)}function Xe(e,a,t){return je.Cartesian3.subtract(e,a,t),je.Cartesian3.normalize(t,t),t}function S(e,a,t,n){return n=Xe(e,a,n),n=je.Cartesian3.cross(n,t,n),n=je.Cartesian3.normalize(n,n),n=je.Cartesian3.cross(t,n,n)}M.pack=function(e,a,t){var n=d.defaultValue(t,0),r=e._positions,i=r.length;a[n++]=i;for(var s=0;s<i;++s){var o=r[s];je.Cartesian3.pack(o,a,n),n+=3}return a[n++]=e.granularity,a[n++]=e.loop?1:0,a[n++]=e.arcType,je.Ellipsoid.pack(e._ellipsoid,a,n),n+=je.Ellipsoid.packedLength,a[n++]=e._projectionIndex,a[n++]=e._scene3DOnly?1:0,a},M.unpack=function(e,a,t){for(var n=d.defaultValue(a,0),r=e[n++],i=new Array(r),s=0;s<r;s++)i[s]=je.Cartesian3.unpack(e,n),n+=3;var o=e[n++],l=1===e[n++],u=e[n++],c=je.Ellipsoid.unpack(e,n);n+=je.Ellipsoid.packedLength;var C=e[n++],p=1===e[n++];return B.defined(t)||(t=new M({positions:i})),t._positions=i,t.granularity=o,t.loop=l,t.arcType=u,t._ellipsoid=c,t._projectionIndex=C,t._scene3DOnly=p,t};var I=new je.Cartesian3,x=new je.Cartesian3,N=new je.Cartesian3,R=new je.Cartesian3;function Q(e,a,t,n,r){var i=Xe(t,a,R),s=S(e,a,i,I),o=S(n,a,i,x);if(He.CesiumMath.equalsEpsilon(je.Cartesian3.dot(s,o),-1,He.CesiumMath.EPSILON5))return r=je.Cartesian3.cross(i,s,r),r=je.Cartesian3.normalize(r,r);r=je.Cartesian3.add(o,s,r),r=je.Cartesian3.normalize(r,r);var l=je.Cartesian3.cross(i,r,N);return je.Cartesian3.dot(o,l)<0&&(r=je.Cartesian3.negate(r,r)),r}var K=i.Plane.fromPointNormal(je.Cartesian3.ZERO,je.Cartesian3.UNIT_Y),$=new je.Cartesian3,ee=new je.Cartesian3,ae=new je.Cartesian3,te=new je.Cartesian3,ne=new je.Cartesian3,re=new je.Cartesian3,ie=new je.Cartographic,se=new je.Cartographic,oe=new je.Cartographic;M.createGeometry=function(e){var a,t,n,r,i,s,o=!e._scene3DOnly,l=e.loop,u=e._ellipsoid,c=e.granularity,C=e.arcType,p=new q[e._projectionIndex](u),d=X,h=W,g=e._positions,f=g.length;2===f&&(l=!1);var m,w,v,y=new F.EllipsoidRhumbLine(void 0,void 0,u),M=[g[0]];for(t=0;t<f-1;t++)n=g[t],r=g[t+1],m=V.IntersectionTests.lineSegmentPlane(n,r,K,re),!B.defined(m)||je.Cartesian3.equalsEpsilon(m,n,He.CesiumMath.EPSILON7)||je.Cartesian3.equalsEpsilon(m,r,He.CesiumMath.EPSILON7)||(e.arcType===Y.ArcType.GEODESIC?M.push(je.Cartesian3.clone(m)):e.arcType===Y.ArcType.RHUMB&&(v=u.cartesianToCartographic(m,ie).longitude,i=u.cartesianToCartographic(n,ie),s=u.cartesianToCartographic(r,se),y.setEndPoints(i,s),w=y.findIntersectionWithLongitude(v,oe),m=u.cartographicToCartesian(w,re),!B.defined(m)||je.Cartesian3.equalsEpsilon(m,n,He.CesiumMath.EPSILON7)||je.Cartesian3.equalsEpsilon(m,r,He.CesiumMath.EPSILON7)||M.push(je.Cartesian3.clone(m)))),M.push(r);l&&(n=g[f-1],r=g[0],m=V.IntersectionTests.lineSegmentPlane(n,r,K,re),!B.defined(m)||je.Cartesian3.equalsEpsilon(m,n,He.CesiumMath.EPSILON7)||je.Cartesian3.equalsEpsilon(m,r,He.CesiumMath.EPSILON7)||(e.arcType===Y.ArcType.GEODESIC?M.push(je.Cartesian3.clone(m)):e.arcType===Y.ArcType.RHUMB&&(v=u.cartesianToCartographic(m,ie).longitude,i=u.cartesianToCartographic(n,ie),s=u.cartesianToCartographic(r,se),y.setEndPoints(i,s),w=y.findIntersectionWithLongitude(v,oe),m=u.cartographicToCartesian(w,re),!B.defined(m)||je.Cartesian3.equalsEpsilon(m,n,He.CesiumMath.EPSILON7)||je.Cartesian3.equalsEpsilon(m,r,He.CesiumMath.EPSILON7)||M.push(je.Cartesian3.clone(m)))));var T=M.length,E=new Array(T);for(t=0;t<T;t++){var _=je.Cartographic.fromCartesian(M[t],u);_.height=0,E[t]=_}if(!((T=(E=G.arrayRemoveDuplicates(E,je.Cartographic.equalsEpsilon)).length)<2)){var O=[],P=[],b=[],k=[],A=$,L=ee,S=ae,I=te,x=ne,N=E[0],R=E[1];for(A=J(u,E[T-1],d,A),I=J(u,R,d,I),L=J(u,N,d,L),S=J(u,N,h,S),x=l?Q(A,L,S,I,x):U(N,R,h,u,x),je.Cartesian3.pack(x,P,0),je.Cartesian3.pack(L,b,0),je.Cartesian3.pack(S,k,0),O.push(N.latitude),O.push(N.longitude),Z(N,R,d,h,c,C,u,P,b,k,O),t=1;t<T-1;++t){A=je.Cartesian3.clone(L,A),L=je.Cartesian3.clone(I,L);var D=E[t];J(u,D,h,S),J(u,E[t+1],d,I),Q(A,L,S,I,x),a=P.length,je.Cartesian3.pack(x,P,a),je.Cartesian3.pack(L,b,a),je.Cartesian3.pack(S,k,a),O.push(D.latitude),O.push(D.longitude),Z(E[t],E[t+1],d,h,c,C,u,P,b,k,O)}var z=E[T-1],H=E[T-2];if(L=J(u,z,d,L),S=J(u,z,h,S),l){var j=E[0];x=Q(A=J(u,H,d,A),L,S,I=J(u,j,d,I),x)}else x=U(H,z,h,u,x);if(a=P.length,je.Cartesian3.pack(x,P,a),je.Cartesian3.pack(L,b,a),je.Cartesian3.pack(S,k,a),O.push(z.latitude),O.push(z.longitude),l){for(Z(z,N,d,h,c,C,u,P,b,k,O),a=P.length,t=0;t<3;++t)P[a+t]=P[t],b[a+t]=b[t],k[a+t]=k[t];O.push(N.latitude),O.push(N.longitude)}return function(e,a,t,n,r,i,s){var o,l,u,c,C,p,d=a._ellipsoid,h=t.length/3-1,g=8*h,f=4*g,m=36*h,w=65535<g?new Uint32Array(m):new Uint16Array(m),v=new Float64Array(3*g),y=new Float32Array(f),M=new Float32Array(f),T=new Float32Array(f),E=new Float32Array(f),_=new Float32Array(f);s&&(u=new Float32Array(f),c=new Float32Array(f),C=new Float32Array(f),p=new Float32Array(2*g));var O=i.length/2,P=0,b=Ke;b.height=0;var k=$e;k.height=0;var A=ea,L=aa;if(s)for(l=0,o=1;o<O;o++)b.latitude=i[l],b.longitude=i[l+1],k.latitude=i[l+2],k.longitude=i[l+3],A=a.project(b,A),L=a.project(k,L),P+=je.Cartesian3.distance(A,L),l+=2;var S=n.length/3;L=je.Cartesian3.unpack(n,0,L);var I,x=0;for(l=3,o=1;o<S;o++)A=je.Cartesian3.clone(L,A),L=je.Cartesian3.unpack(n,l,L),x+=je.Cartesian3.distance(A,L),l+=3;l=3;var N=0,R=0,D=0,z=0,H=!1,j=je.Cartesian3.unpack(t,0,na),B=je.Cartesian3.unpack(n,0,aa),V=je.Cartesian3.unpack(r,0,ia);if(e){var G=je.Cartesian3.unpack(t,t.length-6,ta);We(V,G,j,B)&&(V=je.Cartesian3.negate(V,V))}var Y=0,F=0,q=0;for(o=0;o<h;o++){var X,W,U,Z,J=je.Cartesian3.clone(j,ta),Q=je.Cartesian3.clone(B,ea),K=je.Cartesian3.clone(V,ra);if(H&&(K=je.Cartesian3.negate(K,K)),j=je.Cartesian3.unpack(t,l,na),B=je.Cartesian3.unpack(n,l,aa),V=je.Cartesian3.unpack(r,l,ia),H=We(V,J,j,B),b.latitude=i[N],b.longitude=i[N+1],k.latitude=i[N+2],k.longitude=i[N+3],s){var $=Qe(b,k);X=a.project(b,pa);var ee=Xe(W=a.project(k,da),X,_a);ee.y=Math.abs(ee.y),U=ha,Z=ga,0===$||je.Cartesian3.dot(ee,je.Cartesian3.UNIT_Y)>qe?(U=Ue(a,b,K,X,ha),Z=Ue(a,k,V,W,ga)):1===$?(Z=Ue(a,k,V,W,ga),U.x=0,U.y=He.CesiumMath.sign(b.longitude-Math.abs(k.longitude)),U.z=0):(U=Ue(a,b,K,X,ha),Z.x=0,Z.y=He.CesiumMath.sign(b.longitude-k.longitude),Z.z=0)}var ae=je.Cartesian3.distance(Q,B),te=Ye.EncodedCartesian3.fromCartesian(J,Ta),ne=je.Cartesian3.subtract(j,J,fa),re=je.Cartesian3.normalize(ne,va),ie=je.Cartesian3.subtract(Q,J,ma);ie=je.Cartesian3.normalize(ie,ie);var se=je.Cartesian3.cross(re,ie,va);se=je.Cartesian3.normalize(se,se);var oe=je.Cartesian3.cross(ie,K,ya);oe=je.Cartesian3.normalize(oe,oe);var le=je.Cartesian3.subtract(B,j,wa);le=je.Cartesian3.normalize(le,le);var ue=je.Cartesian3.cross(V,le,Ma);ue=je.Cartesian3.normalize(ue,ue);var ce,Ce,pe,de=ae/x,he=Y/x,ge=0,fe=0,me=0;if(s){ge=je.Cartesian3.distance(X,W),ce=Ye.EncodedCartesian3.fromCartesian(X,Ea),Ce=je.Cartesian3.subtract(W,X,_a);var we=(pe=je.Cartesian3.normalize(Ce,Oa)).x;pe.x=pe.y,pe.y=-we,fe=ge/P,me=F/P}for(I=0;I<8;I++){var ve=z+4*I,ye=R+2*I,Me=ve+3,Te=I<4?1:-1,Ee=2===I||3===I||6===I||7===I?1:-1;je.Cartesian3.pack(te.high,y,ve),y[Me]=ne.x,je.Cartesian3.pack(te.low,M,ve),M[Me]=ne.y,je.Cartesian3.pack(oe,T,ve),T[Me]=ne.z,je.Cartesian3.pack(ue,E,ve),E[Me]=de*Te,je.Cartesian3.pack(se,_,ve);var _e=he*Ee;0===_e&&Ee<0&&(_e=9),_[Me]=_e,s&&(u[ve]=ce.high.x,u[ve+1]=ce.high.y,u[ve+2]=ce.low.x,u[ve+3]=ce.low.y,C[ve]=-U.y,C[ve+1]=U.x,C[ve+2]=Z.y,C[ve+3]=-Z.x,c[ve]=Ce.x,c[ve+1]=Ce.y,c[ve+2]=pe.x,c[ve+3]=pe.y,p[ye]=fe*Te,0===(_e=me*Ee)&&Ee<0&&(_e=9),p[ye+1]=_e)}var Oe=ca,Pe=Ca,be=la,ke=ua,Ae=je.Rectangle.fromCartographicArray(sa,oa),Le=Fe.getMinimumMaximumHeights(Ae,d),Se=Le.minimumTerrainHeight,Ie=Le.maximumTerrainHeight;q+=Se,q+=Ie,Ze(J,Q,Se,Ie,Oe,be),Ze(j,B,Se,Ie,Pe,ke);var xe=je.Cartesian3.multiplyByScalar(se,He.CesiumMath.EPSILON5,Pa);je.Cartesian3.add(Oe,xe,Oe),je.Cartesian3.add(Pe,xe,Pe),je.Cartesian3.add(be,xe,be),je.Cartesian3.add(ke,xe,ke),Je(Oe,Pe),Je(be,ke),je.Cartesian3.pack(Oe,v,D),je.Cartesian3.pack(Pe,v,D+3),je.Cartesian3.pack(ke,v,D+6),je.Cartesian3.pack(be,v,D+9),xe=je.Cartesian3.multiplyByScalar(se,-2*He.CesiumMath.EPSILON5,Pa),je.Cartesian3.add(Oe,xe,Oe),je.Cartesian3.add(Pe,xe,Pe),je.Cartesian3.add(be,xe,be),je.Cartesian3.add(ke,xe,ke),Je(Oe,Pe),Je(be,ke),je.Cartesian3.pack(Oe,v,D+12),je.Cartesian3.pack(Pe,v,D+15),je.Cartesian3.pack(ke,v,D+18),je.Cartesian3.pack(be,v,D+21),N+=2,l+=3,R+=16,D+=24,z+=32,Y+=ae,F+=ge}var Ne=l=0;for(o=0;o<h;o++){for(I=0;I<Aa;I++)w[l+I]=ka[I]+Ne;Ne+=8,l+=Aa}var Re=ba;Be.BoundingSphere.fromVertices(t,je.Cartesian3.ZERO,3,Re[0]),Be.BoundingSphere.fromVertices(n,je.Cartesian3.ZERO,3,Re[1]);var De=Be.BoundingSphere.fromBoundingSpheres(Re);De.radius+=q/(2*h);var ze={position:new Ge.GeometryAttribute({componentDatatype:Ve.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:v}),startHiAndForwardOffsetX:La(y),startLoAndForwardOffsetY:La(M),startNormalAndForwardOffsetZ:La(T),endNormalAndTextureCoordinateNormalizationX:La(E),rightNormalAndTextureCoordinateNormalizationY:La(_)};s&&(ze.startHiLo2D=La(u),ze.offsetAndRight2D=La(c),ze.startEndNormals2D=La(C),ze.texcoordNormalization2D=new Ge.GeometryAttribute({componentDatatype:Ve.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:p}));return new Ge.Geometry({attributes:ze,indices:w,boundingSphere:De})}(l,p,b,k,P,O,o)}};var D=new je.Cartesian3,z=new Be.Matrix3,H=new Be.Quaternion;function We(e,a,t,n){var r=Xe(t,a,D),i=je.Cartesian3.dot(r,e);if(qe<i||i<y){var s=Xe(n,t,R),o=i<y?He.CesiumMath.PI_OVER_TWO:-He.CesiumMath.PI_OVER_TWO,l=Be.Quaternion.fromAxisAngle(s,o,H),u=Be.Matrix3.fromQuaternion(l,z);return Be.Matrix3.multiplyByVector(u,e,e),!0}return!1}var j=new je.Cartographic,le=new je.Cartesian3,ue=new je.Cartesian3;function Ue(e,a,t,n,r){var i=je.Cartographic.toCartesian(a,e._ellipsoid,le),s=je.Cartesian3.add(i,t,ue),o=!1,l=e._ellipsoid,u=l.cartesianToCartographic(s,j);Math.abs(a.longitude-u.longitude)>He.CesiumMath.PI_OVER_TWO&&(o=!0,s=je.Cartesian3.subtract(i,t,ue),u=l.cartesianToCartographic(s,j)),u.height=0;var c=e.project(u,r);return(r=je.Cartesian3.subtract(c,n,r)).z=0,r=je.Cartesian3.normalize(r,r),o&&je.Cartesian3.negate(r,r),r}var ce=new je.Cartesian3,Ce=new je.Cartesian3;function Ze(e,a,t,n,r,i){var s=je.Cartesian3.subtract(a,e,ce);je.Cartesian3.normalize(s,s);var o=t-X,l=je.Cartesian3.multiplyByScalar(s,o,Ce);je.Cartesian3.add(e,l,r);var u=n-W;l=je.Cartesian3.multiplyByScalar(s,u,Ce),je.Cartesian3.add(a,l,i)}var pe=new je.Cartesian3;function Je(e,a){var t=i.Plane.getPointDistance(K,e),n=i.Plane.getPointDistance(K,a),r=pe;He.CesiumMath.equalsEpsilon(t,0,He.CesiumMath.EPSILON2)?(r=Xe(a,e,r),je.Cartesian3.multiplyByScalar(r,He.CesiumMath.EPSILON2,r),je.Cartesian3.add(e,r,e)):He.CesiumMath.equalsEpsilon(n,0,He.CesiumMath.EPSILON2)&&(r=Xe(e,a,r),je.Cartesian3.multiplyByScalar(r,He.CesiumMath.EPSILON2,r),je.Cartesian3.add(a,r,a))}function Qe(e,a){var t=Math.abs(e.longitude),n=Math.abs(a.longitude);if(He.CesiumMath.equalsEpsilon(t,He.CesiumMath.PI,He.CesiumMath.EPSILON11)){var r=He.CesiumMath.sign(a.longitude);return e.longitude=r*(t-He.CesiumMath.EPSILON11),1}if(He.CesiumMath.equalsEpsilon(n,He.CesiumMath.PI,He.CesiumMath.EPSILON11)){var i=He.CesiumMath.sign(e.longitude);return a.longitude=i*(n-He.CesiumMath.EPSILON11),2}return 0}var Ke=new je.Cartographic,$e=new je.Cartographic,ea=new je.Cartesian3,aa=new je.Cartesian3,ta=new je.Cartesian3,na=new je.Cartesian3,ra=new je.Cartesian3,ia=new je.Cartesian3,sa=[Ke,$e],oa=new je.Rectangle,la=new je.Cartesian3,ua=new je.Cartesian3,ca=new je.Cartesian3,Ca=new je.Cartesian3,pa=new je.Cartesian3,da=new je.Cartesian3,ha=new je.Cartesian3,ga=new je.Cartesian3,fa=new je.Cartesian3,ma=new je.Cartesian3,wa=new je.Cartesian3,va=new je.Cartesian3,ya=new je.Cartesian3,Ma=new je.Cartesian3,Ta=new Ye.EncodedCartesian3,Ea=new Ye.EncodedCartesian3,_a=new je.Cartesian3,Oa=new je.Cartesian3,Pa=new je.Cartesian3,ba=[new Be.BoundingSphere,new Be.BoundingSphere],ka=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],Aa=ka.length;function La(e){return new Ge.GeometryAttribute({componentDatatype:Ve.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return M._projectNormal=Ue,function(e,a){return Fe.initialize().then(function(){return B.defined(a)&&(e=M.unpack(e,a)),M.createGeometry(e)})}});
